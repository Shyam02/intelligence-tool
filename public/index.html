<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Marketing Intelligence Tool</title>
    <!-- Load CSS files in order -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/articles.css">
    <link rel="stylesheet" href="styles/twitterBriefs.css">
    <link rel="stylesheet" href="styles/tabs.css">
    <link rel="stylesheet" href="styles/reddit.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎯 AI Marketing Intelligence Tool</h1>
            <p>Generate foundational intelligence for content marketing strategy</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('setup')" id="setupTab">
                    🏠 Setup
                    <span class="tab-status-indicator"></span>
                </button>
                <button class="tab-button" onclick="switchTab('ideaSources')" id="ideaSourcesTab">
                    💡 Idea Sources
                    <span class="tab-status-indicator"></span>
                </button>
                <button class="tab-button" onclick="switchTab('ideaBank')" id="ideaBankTab">
                    📝 Idea Bank
                    <span class="tab-status-indicator"></span>
                </button>
                <button class="tab-button" onclick="switchTab('contentBriefs')" id="contentBriefsTab">
                    ✍️ Content Briefs
                    <span class="tab-status-indicator"></span>
                </button>
                <button class="tab-button" onclick="switchTab('settings')" id="settingsTab">
                    ⚙️ Settings
                    <span class="tab-status-indicator"></span>
                </button>
            </div>
        </div>

        <!-- Tab 1: Setup -->
        <div id="setupTabContent" class="tab-content active">
            <div class="tab-content-container setup-tab">
                <div class="form-container">
                    <h2>Business Setup & Intelligence</h2>
                    <form id="onboardingForm">
                        <div class="section">
                            <h2>Universal Questions</h2>
                            
                            <div class="form-group">
                                <label for="launchDate">What is your product/business launch date?</label>
                                <input type="date" id="launchDate" name="launchDate" required>
                                <p class="help-text">This can be a past date (if you've already launched) or a future date (if you're planning to launch). Even a tentative date helps us create the right content strategy for your business stage.</p>
                            </div>

                            <div class="form-group">
                                <label for="targetGeography">What's your target geographic market?</label>
                                <input type="text" id="targetGeography" name="targetGeography" placeholder="e.g., US and Canada, Global, Europe">
                                <p class="help-text">Where do your customers come from? Examples: Global, United States, US and Canada, English-speaking countries, California only, India, Europe, Southeast Asia, New York City</p>
                            </div>

                            <div class="form-group">
                                <label for="websiteUrl">What's your website URL?</label>
                                <input type="url" id="websiteUrl" name="websiteUrl" placeholder="https://example.com">
                                <p class="help-text">Leave this blank if you don't have a website yet - we'll work with that!</p>
                            </div>

                            <div class="form-group">
                                <label for="businessSpecifics">Tell us anything specific about your business that would help us create better content</label>
                                <textarea id="businessSpecifics" name="businessSpecifics" rows="4" placeholder="Top 3 competitors, social media handles, unique features..."></textarea>
                                <p class="help-text">This helps us understand your unique situation. You can mention things like: Top 3 competitors (names or website URLs), Your social media handles (if you have them), Unique features or selling points, Target industries or customer types, Recent milestones or achievements, Challenges you're facing, Anything else that makes your business unique</p>
                            </div>
                        </div>

                        <div class="section" id="categorySpecificSection" style="display: none;">
                            <h2>Additional Information</h2>
                            <div id="categoryQuestions"></div>
                        </div>

                        <button type="submit" class="submit-btn">Generate Intelligence</button>
                    </form>
                </div>

                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Generating foundational intelligence...</p>
                </div>

                <div class="results-container" id="resultsContainer" style="display: none;">
                    <h2>🧠 Foundational Intelligence Generated</h2>
                    
                    <div class="result-section">
                        <h3>Raw User Input</h3>
                        <div class="copy-section">
                            <pre id="onboardingDataOutput"></pre>
                            <button class="copy-btn" onclick="copyToClipboard('onboardingDataOutput', this)">📋 Copy User Input</button>
                        </div>
                    </div>

                    <div class="result-section">
                        <h3>AI Foundational Intelligence (Strategic Analysis)</h3>
                        <div class="copy-section">
                            <pre id="intelligenceOutput"></pre>
                            <button class="copy-btn" onclick="copyToClipboard('intelligenceOutput', this)">📋 Copy Intelligence Data</button>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="next-btn" onclick="generateQueries()">🔍 Generate Search Queries</button>
                        <button class="reset-btn" onclick="resetForm()">🔄 Start Over</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Idea Sources -->
        <div id="ideaSourcesTabContent" class="tab-content">
            <div class="tab-content-container idea-sources-tab">
                <h2>💡 Idea Generation Sources</h2>
                
                <div class="idea-sources-layout">
                    <!-- Search Intelligence Section -->
                    <div class="source-section search-section">
                        <div class="source-header">
                            <h3>🔍 Search Intelligence</h3>
                            <span class="source-status" id="searchStatus">Ready to generate queries</span>
                        </div>
                        
                        <div class="queries-container" id="queriesContainer" style="display: none;">
                            <div class="query-section">
                                <h4>Competitor Discovery Queries</h4>
                                <div class="copy-section">
                                    <pre id="competitorQueriesOutput"></pre>
                                    <button class="copy-btn" onclick="copyToClipboard('competitorQueriesOutput', this)">📋 Copy Competitor Queries</button>
                                </div>
                            </div>

                            <div class="query-section">
                                <h4>Keyword Intelligence Queries</h4>
                                <div class="copy-section">
                                    <pre id="keywordQueriesOutput"></pre>
                                    <button class="copy-btn" onclick="copyToClipboard('keywordQueriesOutput', this)">📋 Copy Keyword Queries</button>
                                </div>
                            </div>

                            <div class="query-section">
                                <h4>Content Discovery Queries</h4>
                                <div class="copy-section">
                                    <pre id="contentQueriesOutput"></pre>
                                    <button class="copy-btn" onclick="copyToClipboard('contentQueriesOutput', this)">📋 Copy Content Queries</button>
                                </div>
                            </div>

                            <div class="test-search-section">
                                <h4>🔎 Test Search Query</h4>
                                <div class="search-test">
                                    <input type="text" id="testQuery" placeholder="Paste a search query here to test it">
                                    <button onclick="executeTestSearch()" class="test-btn">Execute Search</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reddit Intelligence Section -->
                    <div class="source-section reddit-section">
                        <div class="source-header">
                            <h3>💬 Reddit Intelligence</h3>
                            <span class="source-status" id="redditStatus">Ready to discover communities</span>
                        </div>
                        
                        <div class="reddit-content">
                            <p class="section-description">Monitor discussions and discover communities where your customers gather</p>
                            
                            <div class="reddit-actions">
                                <button onclick="discoverSubreddits()" class="discover-subreddits-btn">
                                    📍 Discover Subreddits
                                </button>
                            </div>
                            
                            <!-- Subreddit Discovery Results -->
                            <div id="subredditResults" style="display: none;"></div>
                            
                            <!-- UPDATED: Reddit Queries Display -->
                            <div class="reddit-queries-container" id="redditQueriesContainer" style="display: none;">
                                <div class="query-section">
                                    <h4>Reddit Discussion Queries</h4>
                                    <div class="copy-section">
                                        <pre id="redditQueriesOutput"></pre>
                                        <button class="copy-btn" onclick="copyToClipboard('redditQueriesOutput', this)">📋 Copy Reddit Queries</button>
                                    </div>
                                </div>

                                <div class="test-search-section">
                                    <h4>🔍 Test Reddit Query</h4>
                                    <div class="search-test">
                                        <input type="text" id="testRedditQuery" placeholder="Paste a Reddit query here to test it">
                                        <button onclick="executeTestRedditSearch()" class="test-btn">Execute Reddit Search</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Reddit Search Results Summary (No longer shows full results) -->
                            <div id="redditSearchResults" style="display: none;"></div>
                        </div>
                    </div>
                </div>

                <div class="empty-state" id="ideaSourcesEmpty">
                    <h3>Ready to Generate Content Ideas</h3>
                    <p>Complete the Setup tab first to generate search queries and start collecting content ideas.</p>
                    <div class="arrow">↤</div>
                    <p>Go to Setup tab to begin</p>
                </div>

                <div class="action-buttons">
                    <button class="reset-btn" onclick="resetForm()">🔄 Start Over</button>
                </div>
            </div>
        </div>

        <!-- Tab 3: Idea Bank -->
        <div id="ideaBankTabContent" class="tab-content">
            <div class="tab-content-container idea-bank-tab">
                <h2>📝 Collected Ideas</h2>
                
                <div class="search-results" id="searchResults" style="display: none;">
                    <div class="copy-section">
                        <pre id="searchResultsOutput"></pre>
                        <button class="copy-btn" onclick="copyToClipboard('searchResultsOutput', this)">📋 Copy Search Results</button>
                    </div>
                </div>

                <div class="empty-state" id="ideaBankEmpty">
                    <h3>No Ideas Collected Yet</h3>
                    <p>Execute searches from the Idea Sources tab to start collecting content ideas here.</p>
                    <div class="arrow">↤</div>
                    <p>Use the test search in Idea Sources to get started</p>
                </div>
            </div>
        </div>

        <!-- Tab 4: Content Briefs -->
        <div id="contentBriefsTabContent" class="tab-content">
            <div class="tab-content-container content-briefs-tab">
                <h2>✍️ Content Briefs</h2>
                
                <div class="twitter-briefs-container" id="twitterBriefs" style="display: none;">
                    <!-- Twitter briefs will be populated here -->
                </div>

                <div class="empty-state" id="contentBriefsEmpty">
                    <h3>No Content Briefs Created Yet</h3>
                    <p>Select articles from the Idea Bank and generate Twitter content briefs to see them here.</p>
                    <div class="arrow">↤</div>
                    <p>Collect and select articles first</p>
                </div>
            </div>
        </div>

        <!-- Tab 5: Settings -->
        <div id="settingsTabContent" class="tab-content">
            <div class="tab-content-container settings-tab">
                <h2>⚙️ Settings</h2>
                
                <div class="section">
                    <h3>API Configuration</h3>
                    <p>Test your API connections to ensure everything is working properly.</p>
                    <button onclick="testAPI()" class="test-api-btn">Test API Connection</button>
                </div>

                <div class="section">
                    <h3>Business Profile</h3>
                    <p>Your business profile and intelligence are configured in the Setup tab.</p>
                </div>

                <div class="section">
                    <h3>System Information</h3>
                    <p>This tool generates foundational intelligence for content marketing strategy using AI-powered analysis and search capabilities.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Load JavaScript files in order -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/results.js"></script>
    <script src="js/forms.js"></script>
    <script src="js/webSearch.js"></script>
    <script src="js/twitter.js"></script>
    <script src="js/reddit.js"></script>
    <script src="js/app.js"></script>
</body>
</html>